(self.AMP=self.AMP||[]).push({n:"amp-audio",v:"1910212134200",f:(function(AMP,_){
var l,m="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},n;if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var p;a:{var q={a:!0},r={};try{r.__proto__=q;p=r.a;break a}catch(a){}p=!1}n=p?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var t=n;function u(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function v(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function w(a){var b=Object.create(null);if(!a)return b;for(var c;c=aa.exec(a);){var d=v(c[1],c[1]),e=c[2]?v(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var x="";
function y(){var a,b=a||self;if(b.__AMP_MODE)var c=b.__AMP_MODE;else{c=b;var d=self.AMP_CONFIG||{},e=!!d.test||!(!c.__AMP_TEST&&!c.__karma__),f=c.__karma__&&c.__karma__.config.amp.testOnIe,g=!!d.localDev||e,h=w(c.location.originalHash||c.location.hash);d=d.spt;var k=w(c.location.search);x||(x=g?"1910212134200":c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"011910212134200");c={localDev:g,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(h.development)||c.AMP_DEV_MODE),examiner:"2"==h.development,
geoOverride:h["amp-geo"],userLocationOverride:h["amp-user-location"],minified:!0,lite:void 0!=k.amp_lite,test:e,testIe:f,log:h.log,version:"1910212134200",rtvVersion:x,singlePassType:d};c=b.__AMP_MODE=c}return c};var ba=Object.prototype.toString;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function A(){if(!z.user)throw Error("failed to call initLogConstructor");return z.user}function B(){if(z.dev)return z.dev;throw Error("failed to call initLogConstructor");}function C(a,b,c,d,e){A().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};function D(){var a=100;this.w=a;this.l=this.m=0;this.j=Object.create(null)}D.prototype.has=function(a){return!!this.j[a]};D.prototype.get=function(a){var b=this.j[a];if(b)return b.access=++this.l,b.payload};D.prototype.put=function(a,b){this.has(a)||this.m++;this.j[a]={payload:b,access:this.l};if(!(this.m<=this.w)){B().warn("lru-cache","Trimming LRU cache");a=this.j;var c=this.l+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.m--)}};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});var E,F;
function G(a,b){var c=void 0===c?"source":c;C(null!=a,"%s %s must be available",b,c);var d=a;a=d;if("string"==typeof a){E||(E=self.document.createElement("a"),F=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new D));var e=F,f=E;if(e&&e.has(a))a=e.get(a);else{f.href=a;f.protocol||(f.href=f.href);var g={href:f.href,protocol:f.protocol,host:f.host,hostname:f.hostname,port:"0"==f.port?"":f.port,pathname:f.pathname,search:f.search,hash:f.hash,origin:null};"/"!==g.pathname[0]&&(g.pathname="/"+g.pathname);
if("http:"==g.protocol&&80==g.port||"https:"==g.protocol&&443==g.port)g.port="",g.host=g.hostname;g.origin=f.origin&&"null"!=f.origin?f.origin:"data:"!=g.protocol&&g.host?g.protocol+"//"+g.host:g.href;f=y().test&&Object.freeze?Object.freeze(g):g;e&&e.put(a,f);a=f}}(e="https:"==a.protocol||"localhost"==a.hostname||"127.0.0.1"==a.hostname)||(a=a.hostname,e=a.length-10,e=0<=e&&a.indexOf(".localhost",e)==e);C(e||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',
b,c,d)};function ca(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){B().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};function da(a){var b=a.ownerDocument.defaultView,c=b.__AMP_TOP||(b.__AMP_TOP=b),d=b!=c;var e=c;if(e.__AMP__EXPERIMENT_TOGGLES)var f=e.__AMP__EXPERIMENT_TOGGLES;else{e.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=e.__AMP__EXPERIMENT_TOGGLES;if(e.AMP_CONFIG)for(var g in e.AMP_CONFIG){var h=e.AMP_CONFIG[g];"number"===typeof h&&0<=h&&1>=h&&(f[g]=Math.random()<h)}if(e.AMP_CONFIG&&Array.isArray(e.AMP_CONFIG["allow-doc-opt-in"])&&0<e.AMP_CONFIG["allow-doc-opt-in"].length&&(g=e.AMP_CONFIG["allow-doc-opt-in"],
h=e.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){h=h.getAttribute("content").split(",");for(var k=0;k<h.length;k++)-1!=g.indexOf(h[k])&&(f[h[k]]=!0)}Object.assign(f,ca(e));if(e.AMP_CONFIG&&Array.isArray(e.AMP_CONFIG["allow-url-opt-in"])&&0<e.AMP_CONFIG["allow-url-opt-in"].length)for(g=e.AMP_CONFIG["allow-url-opt-in"],e=w(e.location.originalHash||e.location.hash),h=0;h<g.length;h++)k=e["e-"+g[h]],"1"==k&&(f[g[h]]=!0),"0"==k&&(f[g[h]]=!1)}var ea=!!f["ampdoc-fie"];d&&!ea?a=H(b,
"url")?I(b,"url"):null:(a=J(a),a=K(a),a=H(a,"url")?I(a,"url"):null);return a}function L(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return I(a,b)}function J(a){return a.nodeType?L((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function K(a){a=J(a);return a.isSingleDoc()?a.win:a}function I(a,b){H(a,b);var c=M(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
function N(a){var b=M(a)["amp-analytics-instrumentation"];if(b){if(b.promise)return b.promise;I(a,"amp-analytics-instrumentation");return b.promise=Promise.resolve(b.obj)}return null}function M(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function H(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function fa(){var a=new u,b=a,c=b.promise,d=b.resolve;b=b.reject;c.catch(function(){});return{obj:null,promise:c,resolve:d,reject:b,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function ha(a,b){for(var c;a&&a!==c;a=a.parentElement)if(b(a))return a;return null}function ia(a){return a.closest?a.closest("AMP-STORY"):ha(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"AMP-STORY"):!1})};function ja(a){var b=N(K(a));if(b)return b;var c=J(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<b.length;g++){var h=b[g];h=h.getAttribute("custom-element")||h.getAttribute("custom-template");f[h]=!0}f=Object.keys(f)}else f=[];a=f.includes("amp-analytics")?L(a,"extensions").waitForExtension(a,"amp-analytics"):Promise.resolve();return a}).then(function(){var b=c.win;
if(b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]){b=K(a);var e=N(b);e?b=e:(b=M(b),b["amp-analytics-instrumentation"]=fa(),b=b["amp-analytics-instrumentation"].promise)}else b=null;return b})};var O={title:"",artist:"",album:"",artwork:[{src:""}]};function ka(a,b,c,d,e){var f=b.navigator;"mediaSession"in f&&b.MediaMetadata&&(f.mediaSession.metadata=new b.MediaMetadata(O),la(a,c),f.mediaSession.metadata=new b.MediaMetadata(c),f.mediaSession.setActionHandler("play",d),f.mediaSession.setActionHandler("pause",e))}
function ma(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){try{var c=JSON.parse(b.textContent)}catch(e){c=null}var d=c;if(d&&d.image){if("string"===typeof d.image)return d.image;if(d.image["@list"]&&"string"===typeof d.image["@list"][0])return d.image["@list"][0];if("string"===typeof d.image.url)return d.image.url;if("string"===typeof d.image[0])return d.image[0]}}}
function la(a,b){var c=da(a);if(b&&b.artwork){var d=b.artwork;Array.isArray(d);d.forEach(function(a){a&&(a="[object Object]"===ba.call(a)?a.src:a,C(c.isProtocolValid(a)))})}};var P;function na(a,b,c){var d=void 0,e=a,f=c;var g=function(a){try{return f(a)}catch(S){throw self.__AMP_REPORT_ERROR(S),S;}};var h=oa(),k=!1;d&&(k=d.capture);e.addEventListener(b,g,h?d:k)}function oa(){if(void 0!==P)return P;P=!1;try{var a={get capture(){P=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return P};function Q(a,b,c){na(a,b,c)};function R(a,b){var c;ja(a).then(function(d){d&&d.triggerEventForTarget(a,b,c)})};function T(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.o=O;a.isPlaying=!1;return a}var U=AMP.BaseElement;T.prototype=m(U.prototype);T.prototype.constructor=T;if(t)t(T,U);else for(var V in U)if("prototype"!=V)if(Object.defineProperties){var W=Object.getOwnPropertyDescriptor(U,V);W&&Object.defineProperty(T,V,W)}else T[V]=U[V];T.C=U.prototype;l=T.prototype;l.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};
l.buildCallback=function(){"nodisplay"===this.getLayout()&&(this.element.removeAttribute("autoplay"),this.buildAudioElement());this.registerAction("play",this.B.bind(this));this.registerAction("pause",this.A.bind(this))};
l.mutatedAttributesCallback=function(a){if(this.h){var b=a.src,c=a.controlsList,d=a.loop;if(void 0!==b||void 0!==c||void 0!==d)void 0!==b&&G(b,this.element),this.propagateAttributes(["src","loop","controlsList"],this.h);var e=a.artist;b=a.title;var f=a.album,g=a.artwork;void 0===e&&void 0===b&&void 0===f&&void 0===g||X(this)}};
l.buildAudioElement=function(){var a=this,b=this.element.ownerDocument.createElement("audio");if(!b.play)return this.toggleFallback(!0),Promise.resolve();b.controls=!0;var c=this.element.getAttribute("src");c&&G(c,this.element);this.propagateAttributes("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),b);this.applyFillContent(b);this.getRealChildNodes().forEach(function(a){a.getAttribute&&a.getAttribute("src")&&G(a.getAttribute("src"),a);b.appendChild(a)});
this.element.appendChild(b);this.h=b;Q(this.h,"playing",function(){return pa(a)});Q(this.h,"play",function(){return R(a.element,"audio-play")});Q(this.h,"pause",function(){return R(a.element,"audio-pause")})};l.layoutCallback=function(){"nodisplay"!==this.getLayout()&&this.buildAudioElement();X(this);return"none"===this.element.getAttribute("preload")?this.h:this.loadPromise(this.h)};
function X(a){var b=a.getAmpDoc().win.document,c=a.element.getAttribute("artist")||"",d=a.element.getAttribute("title")||a.element.getAttribute("aria-label")||b.title||"",e=a.element.getAttribute("album")||"",f;(f=a.element.getAttribute("artwork")||ma(b))||(f=(f=b.querySelector('meta[property="og:image"]'))?f.getAttribute("content"):void 0);f||(f=(b=b.querySelector('link[rel="shortcut icon"]')||b.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);a.o={title:d,artist:c,album:e,artwork:[{src:f||
""}]}}l.renderOutsideViewport=function(){return!0};l.pauseCallback=function(){this.h&&(this.h.pause(),Y(this,!1))};function Z(a){return a.h?ia(a.element)?(A().warn("amp-audio","<amp-story> elements do not support actions on <amp-audio> elements"),!1):!0:!1}l.A=function(){Z(this)&&(this.h.pause(),Y(this,!1))};l.B=function(){Z(this)&&(this.h.play(),Y(this,!0))};function Y(a,b){y().test&&(a.isPlaying=b)}
function pa(a){ka(a.element,a.win,a.o,function(){a.h.play();Y(a,!0)},function(){a.h.pause();Y(a,!1)})}(function(a){a.registerElement("amp-audio",T)})(self.AMP);
})});

//# sourceMappingURL=amp-audio-0.1.js.map
